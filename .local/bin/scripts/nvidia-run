#!/bin/bash

# --- BAGIAN 1: NETRALISIR (PENTING!) ---
# Kita harus menghapus pemaksaan driver AMD/Intel yang ada di Hyprland Global.
# Jika tidak di-unset, game akan crash karena konflik driver.
unset VK_DRIVER_FILES

# --- BAGIAN 2: ARAHKAN KE NVIDIA ---
# Tunjukkan lokasi driver Vulkan NVIDIA secara eksplisit
export VK_DRIVER_FILES=/usr/share/vulkan/icd.d/nvidia_icd.json

# Tunjukkan lokasi driver OpenGL/EGL NVIDIA
export __EGL_VENDOR_LIBRARY_FILENAMES=/usr/share/glvnd/egl_vendor.d/10_nvidia.json

# --- BAGIAN 3: AKTIFKAN PERFORMANCE MODE ---
export __NV_PRIME_RENDER_OFFLOAD=1
export __GLX_VENDOR_LIBRARY_NAME=nvidia
export __VK_LAYER_NV_optimus=NVIDIA_only
export PROTON_HIDE_NVIDIA_GPU=0
export PROTON_ENABLE_NVAPI=1

# --- BAGIAN 4: MangoHud via Env Var (Metode Paling Stabil) ---
# Tidak akan bikin crash launcher karena tidak menyuntik binary,
# cuma memberi sinyal "Kalau siap, tampilkan HUD".
export MANGOHUD=1

# --- BAGIAN 5: JALANKAN ---
exec "$@"
